  <tr>
    <td bgcolor="#cccccc">

<table border="0" VALIGN='center' width="100%" cellpadding="1" cellspacing="1" bgcolor="$GetVar(HtmlTableBgColour)">

<tr align = 'center' name=EDIT_CIF width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-help-first-column.htm;help_ext=CIF-Part-1;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->
  <td name=EDIT_CIF_INFO align='left' VALIGN='left' width='34%'>
$spy.MakeHoverButton('three-EditCifInfo','spy.ExtractCifInfo(True,True)>>spy.EditCifInfo()>>html.Update')
  </td>
  <td name=MERGE_CIF_INFO align='left' VALIGN='right' width='32%'>
$spy.MakeHoverButton('three-Merge_Cif','spy.ExtractCifInfo(True,True)>>spy.MergeCif(True)>>html.Update')
  </td>
  <td width='14%' align='right'>
    HKL/RES
  </td>
  <td width='20%' align='right'>
  <input type="combo"
    name="SET_CIF_FINALISE"
    label=""
    width="94%"
    items="Include [IUcr]<-Include;Exclude<-Exclude;Leave as is<-Ignore"
    value="spy.GetParam('user.cif.finalise')"
    height="GetVar('HtmlComboHeight')"
    bgcolor="GetVar('HtmlTableBgColour')"
    onchange="spy.SetParam('user.cif.finalise',html.GetValue('~name~'))"
    readonly="true"
  >
  </td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->

<tr align = 'center' name=EDIT_CIF width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-help-first-column.htm;help_ext=CIF-Part-2;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->

  <td name=GET_CHECKCIF_REPORT align='left' VALIGN='center' width='34%'>
$spy.MakeHoverButton('three-Checkcif_Report','spy.cif.GetCheckCifReport(html.GetState(SET_CHECKCIF_FCF))')
  </td>

  <td name=GET_CHECKCIF_REPORT_FORMAT align='left' VALIGN='center' width='12%'>
   <input
      type='combo'
      width="100%"
      height="GetVar('HtmlComboHeight')"
      bgcolor="GetVar('HtmlTableBgColour')"
      name='SET_CHECKCIF_FORMAT'
      value="spy.GetParam('user.cif.checkcif.format')"
      items='html;pdf'
      valign='center'
      onchange="spy.SetParam('user.cif.checkcif.format',html.GetValue('~name~'))"
      readonly
    >
  </td>

  <td width='15%' align='right'>
  Send FCF
  </td>

  <td name=GET_CHECKCIF_REPORT_FORMAT align='right' VALIGN='center' width='5%'>
    <input
      type='checkbox'
      bgcolor="GetVar('HtmlTableBgColour')"
      name='SET_CHECKCIF_FCF'
      checked='false'
      right='false'
    >
  </td>

  <td name=REQUEST_CCDC_NUMBER align='right' width = '34%'>
$spy.MakeHoverButton('three-CCDC_Number','spy.ccdc_submit()')
  </td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->


<tr align = 'center' name=EDIT_CIF width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-help-first-column.htm;help_ext=CIF-Part-3;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->

<td name=AUTO_MERGE_CIF align='right' VALIGN='right' width='5%'>
    <input
      type='checkbox'
      bgcolor="GetVar('HtmlTableBgColour')"
      name = "CIFMERGE_AFTER_REFINE"
      checked = "spy.GetParam(snum.refinement.cifmerge_after_refinement)"
      onclick = "spy.SetParam(snum.refinement.cifmerge_after_refinement,html.GetState(~name~))"
      name='SET_CIFMERGE'
      right='false'
    >
</td>

  <td align='left' width='15%'>
Merge CIF:
  </td>

  <td align='left' width='50%'>
<a target='Edit the built-in CIF information' href='spy.EditCifInfo()'>metacif</a> $spy.gui.report.publication.DisplayMergeList()
  </td>

  <td align='right' width ='35%'>
  <b>Add</b>
<a href="spy.gui.report.publication.add_cif_to_merge_list(FileOpen('Choose definition file','.cif files|*.cif','$FilePath()'))>>html.Update">
  <b>local</b></a> |
<a href="spy.gui.report.publication.add_cif_to_merge_list(FileOpen('Choose definition file','.cif files|*.cif','$BaseDir()/etc/site'))>>html.Update">
  <b>default</b></a>&nbsp;<b>CIF</b>
  </td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->

<tr align = 'center' width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-help-first-column.htm;help_ext=CIF-Part-4;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->
  <td name="Force metacif" align='right' VALIGN='right' width='5%'>
    <input
      type='checkbox'
      bgcolor="GetVar('HtmlTableBgColour')"
      name = "FORCE_METACIF"
      checked = "spy.GetParam(snum.metadata.force_metacif)"
      onclick = "spy.SetParam(snum.metadata.force_metacif,html.GetState(~name~))"
      name='SET_CIFMERGE'
      right='false'
    >
  </td>
  <td>
    Merge metacif items even if marked for skipping
  <td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->


<!-- #ignoreif sg('%c')
<tr align = 'center' name=EDIT_CIF width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-help-first-column.htm;help_ext=ABS-STR;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->
  <td width="50%">Absolute structure determination
    <br>Flack parameter: $spy.GetParam('snum.refinement.flack_str')
    <br>Hooft parameter: $spy.GetParam('snum.refinement.hooft_str')
   </td>
   <td width="50%">$+
     html.Snippet("gui/snippets/input-combo", "name=abs_str_determination",
      "value=spy.get_cif_item('_chemical_absolute_configuration')",
      "items=Anomalous dispersion<-ad;Reference molecule<-rm;Reference molecule + AD<-rmad;
Synthesis<-syn;Unknown<-unk;Not applicable<-.;",
      "onchange=spy.set_cif_item('_chemical_absolute_configuration', html.GetValue('~name~'))")
    $-</td>

<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->
#ignoreif -->


</table>
      </td>
    </tr>
